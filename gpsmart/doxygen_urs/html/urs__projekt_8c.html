<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>GPSmart: C:/Users/Marin/Documents/Atmel Studio/6.2/urs_projekt/urs_projekt/urs_projekt.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GPSmart
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Simple student project using GPS module and touch LCD screen.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_f396504afdc959660871b003fa10164d.html">Documents</a></li><li class="navelem"><a class="el" href="dir_b5c39101d23d0e5de2870f109fe54b31.html">Atmel Studio</a></li><li class="navelem"><a class="el" href="dir_21d547af6dda328d9cec9e185f50946e.html">6.2</a></li><li class="navelem"><a class="el" href="dir_0ea535436371f305085fa94f44367522.html">urs_projekt</a></li><li class="navelem"><a class="el" href="dir_fbf8e49f1166703628dc8adf133ddcb0.html">urs_projekt</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">urs_projekt.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The main file receiving data from the gps module, showing graphics on the screen and managing touch events on the screen.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="app__config_8h_source.html">app_config.h</a>&quot;</code><br />
<code>#include &lt;util/delay.h&gt;</code><br />
<code>#include &lt;avr/io.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &quot;<a class="el" href="_s_s_d1289x16_8h_source.html">SSD1289x16.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="font_8h_source.html">font.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ft18x34_8h_source.html">ft18x34.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="tc__ad7843__avr__v1__00_8h_source.html">tc_ad7843_avr_v1_00.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="serial_8h_source.html">serial.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_graphic_8h_source.html">Graphic.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_current_gps_reading.html">CurrentGpsReading</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A structure to keep the current GPS data.  <a href="struct_current_gps_reading.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_previous_gps_reading.html">PreviousGpsReading</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A structure to keep one previous GPS data.  <a href="struct_previous_gps_reading.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae2ac5aaed8d5c1d6747ac395e52b0a7b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#ae2ac5aaed8d5c1d6747ac395e52b0a7b">TCGetH</a>()&#160;&#160;&#160;<a class="el" href="group___t_c.html#gaee0209bfc5eebc394ecd7983e6332fd5">TCGetY</a>()</td></tr>
<tr class="separator:ae2ac5aaed8d5c1d6747ac395e52b0a7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a031069127220afbc17e614679946ef92"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#a031069127220afbc17e614679946ef92">TCGetV</a>()&#160;&#160;&#160;<a class="el" href="group___t_c.html#gad8f951414d812509bbddccf70d190ad4">TCGetX</a>()</td></tr>
<tr class="separator:a031069127220afbc17e614679946ef92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1daf785e3f68d293c7caa1c756d5cb74"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#a1daf785e3f68d293c7caa1c756d5cb74">pi</a>&#160;&#160;&#160;3.14159265358979323846</td></tr>
<tr class="separator:a1daf785e3f68d293c7caa1c756d5cb74"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a20e81f6be6f97101a90599e35e7aa2da"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#a20e81f6be6f97101a90599e35e7aa2da">cal_posx</a> (unsigned short x)</td></tr>
<tr class="memdesc:a20e81f6be6f97101a90599e35e7aa2da"><td class="mdescLeft">&#160;</td><td class="mdescRight">A function for getting the exact x-position of the touch event.  <a href="#a20e81f6be6f97101a90599e35e7aa2da">More...</a><br /></td></tr>
<tr class="separator:a20e81f6be6f97101a90599e35e7aa2da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeb44505f469c46d9c95efb2ffb5993d"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#abeb44505f469c46d9c95efb2ffb5993d">cal_posy</a> (unsigned short y)</td></tr>
<tr class="memdesc:abeb44505f469c46d9c95efb2ffb5993d"><td class="mdescLeft">&#160;</td><td class="mdescRight">A function for getting the exact y-position of the touch event.  <a href="#abeb44505f469c46d9c95efb2ffb5993d">More...</a><br /></td></tr>
<tr class="separator:abeb44505f469c46d9c95efb2ffb5993d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba5bd9067aa6f261123165a337c7957d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#aba5bd9067aa6f261123165a337c7957d">showMenu</a> ()</td></tr>
<tr class="memdesc:aba5bd9067aa6f261123165a337c7957d"><td class="mdescLeft">&#160;</td><td class="mdescRight">A function for showing a selectable menu to the other screens.  <a href="#aba5bd9067aa6f261123165a337c7957d">More...</a><br /></td></tr>
<tr class="separator:aba5bd9067aa6f261123165a337c7957d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb15a360cdce7f9f3f0495da679ea9f9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#aeb15a360cdce7f9f3f0495da679ea9f9">showLiveGPS</a> ()</td></tr>
<tr class="memdesc:aeb15a360cdce7f9f3f0495da679ea9f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">A function for showing a live GPS readings on a dedicated screen.  <a href="#aeb15a360cdce7f9f3f0495da679ea9f9">More...</a><br /></td></tr>
<tr class="separator:aeb15a360cdce7f9f3f0495da679ea9f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dbbbfba0fc69bd838f823d6e5853f36"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#a3dbbbfba0fc69bd838f823d6e5853f36">showDistances</a> ()</td></tr>
<tr class="memdesc:a3dbbbfba0fc69bd838f823d6e5853f36"><td class="mdescLeft">&#160;</td><td class="mdescRight">A function for showing distances from the current GPS location to some hardcoded cities on a dedicated screen.  <a href="#a3dbbbfba0fc69bd838f823d6e5853f36">More...</a><br /></td></tr>
<tr class="separator:a3dbbbfba0fc69bd838f823d6e5853f36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8432924a1f4700081f1aea777a82d92c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#a8432924a1f4700081f1aea777a82d92c">showAltitude</a> ()</td></tr>
<tr class="memdesc:a8432924a1f4700081f1aea777a82d92c"><td class="mdescLeft">&#160;</td><td class="mdescRight">A function for graphical representation of the current altitude data on a dedicated screen.  <a href="#a8432924a1f4700081f1aea777a82d92c">More...</a><br /></td></tr>
<tr class="separator:a8432924a1f4700081f1aea777a82d92c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b06b1f79b465476b4884def3f435d2b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#a8b06b1f79b465476b4884def3f435d2b">showCalc</a> ()</td></tr>
<tr class="memdesc:a8b06b1f79b465476b4884def3f435d2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">A function for showing a Distance Calculator creen.  <a href="#a8b06b1f79b465476b4884def3f435d2b">More...</a><br /></td></tr>
<tr class="separator:a8b06b1f79b465476b4884def3f435d2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f57fdd8b0479b781a5862e7fa6c4407"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#a2f57fdd8b0479b781a5862e7fa6c4407">readGPS</a> ()</td></tr>
<tr class="memdesc:a2f57fdd8b0479b781a5862e7fa6c4407"><td class="mdescLeft">&#160;</td><td class="mdescRight">A function for receiving GPS data and assigning the values to current and previous GPS struct variables.  <a href="#a2f57fdd8b0479b781a5862e7fa6c4407">More...</a><br /></td></tr>
<tr class="separator:a2f57fdd8b0479b781a5862e7fa6c4407"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5894dabbabca6ac03e5822b8c1f76bd"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#ab5894dabbabca6ac03e5822b8c1f76bd">distance</a> (long lat1, long lon1, double lat2, double lon2, char unit)</td></tr>
<tr class="memdesc:ab5894dabbabca6ac03e5822b8c1f76bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">A function for calculating a distance between two GPS points.  <a href="#ab5894dabbabca6ac03e5822b8c1f76bd">More...</a><br /></td></tr>
<tr class="separator:ab5894dabbabca6ac03e5822b8c1f76bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8012f8bd66798ffbdd27462c9f593a54"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#a8012f8bd66798ffbdd27462c9f593a54">deg2rad</a> (double deg)</td></tr>
<tr class="memdesc:a8012f8bd66798ffbdd27462c9f593a54"><td class="mdescLeft">&#160;</td><td class="mdescRight">A function for getting radians from degrees.  <a href="#a8012f8bd66798ffbdd27462c9f593a54">More...</a><br /></td></tr>
<tr class="separator:a8012f8bd66798ffbdd27462c9f593a54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad71ec851896bb003290612760ae0c451"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#ad71ec851896bb003290612760ae0c451">rad2deg</a> (double rad)</td></tr>
<tr class="memdesc:ad71ec851896bb003290612760ae0c451"><td class="mdescLeft">&#160;</td><td class="mdescRight">A function for getting degrees from radians.  <a href="#ad71ec851896bb003290612760ae0c451">More...</a><br /></td></tr>
<tr class="separator:ad71ec851896bb003290612760ae0c451"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a689a6031667d240cc896873a7970ce54"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#a689a6031667d240cc896873a7970ce54">parseHex</a> (char c)</td></tr>
<tr class="memdesc:a689a6031667d240cc896873a7970ce54"><td class="mdescLeft">&#160;</td><td class="mdescRight">A function that returns the decimal equivalent of a Hex value.  <a href="#a689a6031667d240cc896873a7970ce54">More...</a><br /></td></tr>
<tr class="separator:a689a6031667d240cc896873a7970ce54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e64a2723a083ef44aa80f644883475a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#a7e64a2723a083ef44aa80f644883475a">ScanPen</a> (void)</td></tr>
<tr class="memdesc:a7e64a2723a083ef44aa80f644883475a"><td class="mdescLeft">&#160;</td><td class="mdescRight">A function for detecting touch events and calling the appropriate functions depending on the touch event.  <a href="#a7e64a2723a083ef44aa80f644883475a">More...</a><br /></td></tr>
<tr class="separator:a7e64a2723a083ef44aa80f644883475a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="memdesc:a840291bc02cba5474a4cb46a9b9566fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">A function that initializes touch screen, UART and interrupts.  <a href="#a840291bc02cba5474a4cb46a9b9566fe">More...</a><br /></td></tr>
<tr class="separator:a840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a36438f00b2063391de0da2eb7b7661d6"><td class="memItemLeft" align="right" valign="top">const long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#a36438f00b2063391de0da2eb7b7661d6">chalfx</a> = <a class="el" href="app__config_8h.html#a6496265674309f27adc6ac8f8bd9f109">TS_SIZE_X</a>/2</td></tr>
<tr class="separator:a36438f00b2063391de0da2eb7b7661d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd2356ff711ddc425b98f8376fae13a5"><td class="memItemLeft" align="right" valign="top">const long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#afd2356ff711ddc425b98f8376fae13a5">chalfy</a> = <a class="el" href="app__config_8h.html#ad7246d756d19c532d67630d5bddb1e34">TS_SIZE_Y</a>/2</td></tr>
<tr class="separator:afd2356ff711ddc425b98f8376fae13a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a485477bc44eaa2e03e4a1450598920f0"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#a485477bc44eaa2e03e4a1450598920f0">ccx</a> = 0x00000834</td></tr>
<tr class="separator:a485477bc44eaa2e03e4a1450598920f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7282983eb92515fef38863099f8149b5"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#a7282983eb92515fef38863099f8149b5">cm1x</a> = 0x00000007</td></tr>
<tr class="separator:a7282983eb92515fef38863099f8149b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8da7360157eeeb3035a6da0df66ec302"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#a8da7360157eeeb3035a6da0df66ec302">cm2x</a> = 0xFFFFFFB8</td></tr>
<tr class="separator:a8da7360157eeeb3035a6da0df66ec302"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fa68276ef1ca5eae7903eb0c50eddf4"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#a9fa68276ef1ca5eae7903eb0c50eddf4">ccy</a> = 0x00000815</td></tr>
<tr class="separator:a9fa68276ef1ca5eae7903eb0c50eddf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4a4df5e101b4443da29c233088ac18e"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#ae4a4df5e101b4443da29c233088ac18e">cm1y</a> = 0x0000000C</td></tr>
<tr class="separator:ae4a4df5e101b4443da29c233088ac18e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72dd2d1f233fe2f3e5aaf5620c9579fe"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#a72dd2d1f233fe2f3e5aaf5620c9579fe">cm2y</a> = 0x000000A3</td></tr>
<tr class="separator:a72dd2d1f233fe2f3e5aaf5620c9579fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a149973f06d759a4fdbaf801d9bea84e6"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="struct_current_gps_reading.html">CurrentGpsReading</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#a149973f06d759a4fdbaf801d9bea84e6">currentReading</a></td></tr>
<tr class="separator:a149973f06d759a4fdbaf801d9bea84e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fcbaf276eb5351e17515ce59852c91a"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="struct_previous_gps_reading.html">PreviousGpsReading</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#a2fcbaf276eb5351e17515ce59852c91a">previousReading</a></td></tr>
<tr class="separator:a2fcbaf276eb5351e17515ce59852c91a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9787c7a9a223da169e9471b6cf189c84"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#a9787c7a9a223da169e9471b6cf189c84">currentScreen</a></td></tr>
<tr class="separator:a9787c7a9a223da169e9471b6cf189c84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3f9e2b8f323be59321622676da1bf15"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#af3f9e2b8f323be59321622676da1bf15">latitudeInput</a> [11]</td></tr>
<tr class="separator:af3f9e2b8f323be59321622676da1bf15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2be8fdca84d01b8c8a2a6e8167f1f0c"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#ae2be8fdca84d01b8c8a2a6e8167f1f0c">longitudeInput</a> [11]</td></tr>
<tr class="separator:ae2be8fdca84d01b8c8a2a6e8167f1f0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9841c8d0c093a6404a2e6ac0aff8007d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#a9841c8d0c093a6404a2e6ac0aff8007d">focusedField</a> = 0</td></tr>
<tr class="separator:a9841c8d0c093a6404a2e6ac0aff8007d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefabf12793a13c13a0b2ebda729ff9e8"><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#aefabf12793a13c13a0b2ebda729ff9e8">last_pen_check</a> = 0</td></tr>
<tr class="separator:aefabf12793a13c13a0b2ebda729ff9e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a377a8cee7299a546df82521ce0087039"><td class="memItemLeft" align="right" valign="top"><a class="el" href="app__config_8h.html#a6140d5bcb437e2f03b47518b9d236d56">so_pos_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#a377a8cee7299a546df82521ce0087039">hpos</a></td></tr>
<tr class="separator:a377a8cee7299a546df82521ce0087039"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5996d965a430d3c5ad2f115ac2cd1683"><td class="memItemLeft" align="right" valign="top"><a class="el" href="app__config_8h.html#a6140d5bcb437e2f03b47518b9d236d56">so_pos_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#a5996d965a430d3c5ad2f115ac2cd1683">vpos</a></td></tr>
<tr class="separator:a5996d965a430d3c5ad2f115ac2cd1683"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17bfeb81602d52b621d3c23112680d04"><td class="memItemLeft" align="right" valign="top"><a class="el" href="app__config_8h.html#aaa06db4cff02f58c85a9ed881a28e002">pstatus_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="urs__projekt_8c.html#a17bfeb81602d52b621d3c23112680d04">p_stat</a></td></tr>
<tr class="separator:a17bfeb81602d52b621d3c23112680d04"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The main file receiving data from the gps module, showing graphics on the screen and managing touch events on the screen. </p>
<dl class="section author"><dt>Author</dt><dd>Sandro Babic, David Kreso, Marin Krmpotic, Ana Tomas </dd></dl>
<dl class="section date"><dt>Date</dt><dd>6 Feb 2015 </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a1daf785e3f68d293c7caa1c756d5cb74"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define pi&#160;&#160;&#160;3.14159265358979323846</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Value of the PI constant </p>

</div>
</div>
<a class="anchor" id="ae2ac5aaed8d5c1d6747ac395e52b0a7b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TCGetH</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="group___t_c.html#gaee0209bfc5eebc394ecd7983e6332fd5">TCGetY</a>()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a031069127220afbc17e614679946ef92"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TCGetV</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="group___t_c.html#gad8f951414d812509bbddccf70d190ad4">TCGetX</a>()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a20e81f6be6f97101a90599e35e7aa2da"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long cal_posx </td>
          <td>(</td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>x</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A function for getting the exact x-position of the touch event. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>x-coordinate buffer value </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Position X </dd></dl>

</div>
</div>
<a class="anchor" id="abeb44505f469c46d9c95efb2ffb5993d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long cal_posy </td>
          <td>(</td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>y</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A function for getting the exact y-position of the touch event. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">y</td><td>y-coordinate buffer value </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Position Y </dd></dl>

</div>
</div>
<a class="anchor" id="a8012f8bd66798ffbdd27462c9f593a54"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double deg2rad </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>deg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A function for getting radians from degrees. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">deg</td><td>Double precision degrees </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Radians </dd></dl>

</div>
</div>
<a class="anchor" id="ab5894dabbabca6ac03e5822b8c1f76bd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double distance </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>lat1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>lon1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lat2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lon2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>unit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A function for calculating a distance between two GPS points. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lat1</td><td>First point latitude </td></tr>
    <tr><td class="paramname">lon1</td><td>First point longitude </td></tr>
    <tr><td class="paramname">lat2</td><td>Second point latitude </td></tr>
    <tr><td class="paramname">lon2</td><td>Second point longitude </td></tr>
    <tr><td class="paramname">unit</td><td>Distance unit. M for miles, K for kilometers, N for nautical miles </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Distance in desired distance unit </dd></dl>
<p>&lt; Longitude difference</p>
<p>&lt; Distance that is going to be returned to the caller</p>
<p>&lt; Double precision of first point latitude</p>
<p>&lt; Double precision of first point longitude </p>

</div>
</div>
<a class="anchor" id="a840291bc02cba5474a4cb46a9b9566fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A function that initializes touch screen, UART and interrupts. </p>
<p>This function is called only once on the start of the app. </p>

</div>
</div>
<a class="anchor" id="a689a6031667d240cc896873a7970ce54"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t parseHex </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A function that returns the decimal equivalent of a Hex value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>Hex value </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The decimal equivalent </dd></dl>

</div>
</div>
<a class="anchor" id="ad71ec851896bb003290612760ae0c451"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double rad2deg </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>rad</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A function for getting degrees from radians. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">deg</td><td>Double precision radians </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Degrees </dd></dl>

</div>
</div>
<a class="anchor" id="a2f57fdd8b0479b781a5862e7fa6c4407"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void readGPS </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A function for receiving GPS data and assigning the values to current and previous GPS struct variables. </p>
<p>&lt; A temporary buffer storing the degrees</p>
<p>&lt; A temporary array storing 120 chars received from the serial</p>
<p>&lt; A temporary string storing hours</p>
<p>&lt; A temporary string storing minutes</p>
<p>&lt; A temporary string storing seconds</p>
<p>&lt; Pointer used for sliding through an array of chars</p>
<p>&lt; A degree from the degree buffer is stored here </p>

</div>
</div>
<a class="anchor" id="a7e64a2723a083ef44aa80f644883475a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ScanPen </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A function for detecting touch events and calling the appropriate functions depending on the touch event. </p>
<p>This function should be called in an indefinite loop. </p>

</div>
</div>
<a class="anchor" id="a8432924a1f4700081f1aea777a82d92c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void showAltitude </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A function for graphical representation of the current altitude data on a dedicated screen. </p>
<p>This screen is shown when a user selects it from the menu. </p>
<p>&lt; A flag showing if this is the first time showing the screen</p>
<p>&lt; A helper string used to store text that is to be shown on the screen </p>

</div>
</div>
<a class="anchor" id="a8b06b1f79b465476b4884def3f435d2b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void showCalc </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A function for showing a Distance Calculator creen. </p>
<p>This screen is shown when a user selects it from the menu. </p>
<p>&lt; A flag showing if this is the first time showing the screen</p>
<p>&lt; A helper string used to store text that is to be shown on the screen</p>
<p>&lt; Double precision latitude value</p>
<p>&lt; Double precision longitude value</p>
<p>&lt; A flag showing which input field is focused </p>

</div>
</div>
<a class="anchor" id="a3dbbbfba0fc69bd838f823d6e5853f36"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void showDistances </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A function for showing distances from the current GPS location to some hardcoded cities on a dedicated screen. </p>
<p>This screen is shown when a user selects it from the menu. </p>
<p>&lt; A flag showing if this is the first time showing the screen</p>
<p>&lt; A helper string used to store text that is to be shown on the screen </p>

</div>
</div>
<a class="anchor" id="aeb15a360cdce7f9f3f0495da679ea9f9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void showLiveGPS </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A function for showing a live GPS readings on a dedicated screen. </p>
<p>This screen is shown when a user selects it from the menu. </p>
<p>&lt; A flag showing if this is the first time showing the screen</p>
<p>&lt; A helper string used to store text that is to be shown on the screen </p>

</div>
</div>
<a class="anchor" id="aba5bd9067aa6f261123165a337c7957d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void showMenu </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A function for showing a selectable menu to the other screens. </p>
<p>This screen is shown when the app is started. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a485477bc44eaa2e03e4a1450598920f0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long ccx = 0x00000834</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a9fa68276ef1ca5eae7903eb0c50eddf4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long ccy = 0x00000815</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a36438f00b2063391de0da2eb7b7661d6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const long chalfx = <a class="el" href="app__config_8h.html#a6496265674309f27adc6ac8f8bd9f109">TS_SIZE_X</a>/2</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="afd2356ff711ddc425b98f8376fae13a5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const long chalfy = <a class="el" href="app__config_8h.html#ad7246d756d19c532d67630d5bddb1e34">TS_SIZE_Y</a>/2</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a7282983eb92515fef38863099f8149b5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long cm1x = 0x00000007</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ae4a4df5e101b4443da29c233088ac18e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long cm1y = 0x0000000C</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a8da7360157eeeb3035a6da0df66ec302"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long cm2x = 0xFFFFFFB8</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a72dd2d1f233fe2f3e5aaf5620c9579fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long cm2y = 0x000000A3</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a149973f06d759a4fdbaf801d9bea84e6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="struct_current_gps_reading.html">CurrentGpsReading</a>  currentReading</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a9787c7a9a223da169e9471b6cf189c84"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int currentScreen</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The screen currently being shown </p>

</div>
</div>
<a class="anchor" id="a9841c8d0c093a6404a2e6ac0aff8007d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int focusedField = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Which input field is focused </p>

</div>
</div>
<a class="anchor" id="a377a8cee7299a546df82521ce0087039"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="app__config_8h.html#a6140d5bcb437e2f03b47518b9d236d56">so_pos_t</a> hpos</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Horizontal position of the touch event </p>

</div>
</div>
<a class="anchor" id="aefabf12793a13c13a0b2ebda729ff9e8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char last_pen_check = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A flag used to define if touch has just been made or hold </p>

</div>
</div>
<a class="anchor" id="af3f9e2b8f323be59321622676da1bf15"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char latitudeInput[11]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Latitude input field content, defined by the user </p>

</div>
</div>
<a class="anchor" id="ae2be8fdca84d01b8c8a2a6e8167f1f0c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char longitudeInput[11]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Longitude input field content, defined by the user </p>

</div>
</div>
<a class="anchor" id="a17bfeb81602d52b621d3c23112680d04"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="app__config_8h.html#aaa06db4cff02f58c85a9ed881a28e002">pstatus_t</a> p_stat</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Status of event </p>

</div>
</div>
<a class="anchor" id="a2fcbaf276eb5351e17515ce59852c91a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="struct_previous_gps_reading.html">PreviousGpsReading</a>  previousReading</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a5996d965a430d3c5ad2f115ac2cd1683"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="app__config_8h.html#a6140d5bcb437e2f03b47518b9d236d56">so_pos_t</a> vpos</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Vertical position of the touch event </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
